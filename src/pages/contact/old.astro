---
import FloatingHomeButton from "../../components/astro/FloatingHomeButton.astro";
import ContactForm from "../../components/react/ContactForm/ContactForm";
import { getLocale } from "astro-i18n-aut";
import i18n, { loadNamespaces, t } from "../../i18n/i18n";
import type { ContactForm as ContactFormRes } from "../../i18n/locales";
import Card from "../../components/astro/Card.astro";
import Footer from "../../components/astro/footer/Footer.astro";
import Hero from "../../components/astro/Hero.astro";
import Layout from "../../layouts/Layout.astro";

const accentColor = "var(--accent-contact)";

// i18next
const locale = getLocale(Astro.url);
const namespaces = ["contactForm", "shared", "landing"];
await loadNamespaces(locale, namespaces);
const res: ContactFormRes = i18n?.getResourceBundle(locale, "contactForm");
---

<Layout title={t("landing:contact_title")}>
    <main>
        <Hero style="contact" accentColor={accentColor} />
        <Card accentColor={accentColor}>
            <div class="contact-info">
                <div class="contact-me noprint">
                    <h2>{t("shared:LeaveMeAMessage")}</h2>
                    <p>{t("contactForm:ContactMe")}</p>
                    <ContactForm resources={res} client:load />
                </div>
                <div class="social">
                    <h2>{t("shared:SocialLinks")}</h2>
                    <a href="https://www.linkedin.com/in/dalibor-hon/" target="_blank">
                        <i class="devicon-linkedin-plain"></i>
                        {" "}LinkedIn
                    </a>
                </div>
                <div class="location">
                    <h2>{t("shared:Location")}</h2>
                    <p>Ostrava, {t("shared:MSRegion")}</p>
                    <p>{t("shared:CzechRepublic")}</p>
                </div>
            </div>
        </Card>
    </main>
    <Footer accentColor={accentColor} />
</Layout>

<FloatingHomeButton accentColor={accentColor} />

<style>
    body {
        height: 100vh;
        margin: 0px;
        padding: 0px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }

    h2 {
        line-height: 1;
        font-size: 1.25rem;
        font-weight: bold;
        background-color: rgba(var(--accentColor), 0.9);
        background-clip: text;
        color: transparent;
        padding-bottom: 1rem;
    }

    .contact-info {
        display: grid;
        grid-template-rows: repeat(3, 0.35fr);
        grid-template-columns: 0.3fr 1fr;
        margin: 0rem 0 0.5rem 0rem;
        gap: 2rem;
    }

    .social {
        grid-column: 1 / 2;
        grid-row: 1;
    }

    .location {
        grid-column: 1 / 2;
        grid-row: 2;
    }

    .contact-me {
        grid-row: 1 / 4;
        grid-column: 2;
    }

    .resume-cv > button:hover {
        transform: none;
        text-decoration: underline;
        background: none;
        color: rgba(var(--accentColor), 1);
        cursor: pointer;
    }

    @media (max-width: 980px) {
        body {
            height: unset;
        }

        .contact-info {
            display: grid;
            grid-template-rows: repeat(auto-fit, minmax(min-content, 1fr));
            grid-template-columns: 1fr;
        }
        
        .social {
            grid-column: auto;
            grid-row: auto;
        }

        .location {
            grid-column: auto;
            grid-row: auto;
        }

        .contact-me {
            grid-row: auto;
            grid-column: auto;
        }
    }
</style>
